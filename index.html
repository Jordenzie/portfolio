<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jordan A. McKenzie - Portfolio</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" type="image/png" sizes="32x32" href="images/folder-32.png" />
  <style>
    @font-face {
      font-family: 'Chicago';
      src: url('fonts/pixChicago.woff2') format('woff2');
      font-weight: normal;
      font-style: normal;
    }

    * {
      font-family: 'Chicago', sans-serif !important;
      color: black;
      font-size: 12px;
      font-weight: normal !important; /* avoid fallback from bold */
      margin: 0;
      padding: 0;
      -webkit-font-smoothing: none;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: geometricPrecision;
    }

    /* Form controls often ignore/reset font unless forced */
    input, textarea, button, select {
      font-family: inherit !important;
      font-size: inherit;
      font-weight: inherit;
    }

    input::placeholder {
      font-family: inherit !important;
      font-weight: inherit;
    }

    body {
      background: #ffffff;
      margin: 0;
      overflow: hidden;
    }

    /* Full-screen Mac-style 1px border on all sides */
    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      border: 1px solid #000000;
      pointer-events: none;
      z-index: 2000;
    }

    .desktop {
      position: absolute;
      top: 38px; /* adjusted for top taskbar */
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }

    .icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-decoration: none;
      width: 99px;              /* folder width (66px * 1.5) */
      text-align: center;
      cursor: pointer;
      position: absolute;
      user-select: none;
      padding: 6px;
      transition: opacity 0.2s;
    }

    .icon img {
      width: 66px;              /* +50% from previous 44px */
      height: auto;
    }

    .icon span {
      font-size: 7px;
      width: 66px;              /* exactly match folder image width */
      max-width: 66px;
      word-wrap: break-word;
      text-align: center;
    }

    .icon.selected {
      opacity: 0.75;
    }

    .taskbar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 30px;
      display: flex;
      align-items: center;
      padding: 0 22px;
      box-sizing: border-box;
      z-index: 1000;
      font-size: 12px;

      /* Mac OS 9 "platinum" */
      background: #dfdfdf;
      border-top: 1px solid #ffffff;
      border-bottom: 1px solid #000000;
      box-shadow:
        inset 0 1px 0 #ffffff,
        inset 0 -1px 0 #6e6e6e;
    }

    /* Mobile: move taskbar to bottom */
    @media (max-width: 768px) {
      .taskbar {
        top: auto !important;
        bottom: 0 !important;
        border-top: 1px solid #000000;
        border-bottom: 1px solid #ffffff;
        box-shadow:
          inset 0 -1px 0 #ffffff,
          inset 0 1px 0 #6e6e6e;
      }

      /* move desktop area up so it doesn't hide behind taskbar */
      .desktop {
        top: 10px !important;
      }

      /* on mobile, the Find input should pop up above the bottom taskbar */
      .search-bar {
        top: auto !important;
        bottom: 34px !important; /* 30px taskbar height + a little breathing room */
        right: 6px;
      }
    }

    /* darker separator just under the bar */
    .taskbar::after {
      content: "";
      position: absolute;
      left: 0;
      right: 0;
      bottom: -1px;
      height: 1px;
      background: #000000;
      pointer-events: none;
    }

    .left-group {
      display: flex;
      align-items: center;
      gap: 8px; /* space between items */
      min-width: 0;
      flex: 0 1 auto;
    }

    .menubar-folder {
      width: 16px;
      height: 16px;
      image-rendering: pixelated;
      display: inline-block;
    }

    .menu-item {
      display: inline-flex;
      align-items: center;
      min-height: 22px;        /* allow pixel font full height */
      padding: 2px 6px;        /* real vertical padding instead of tight box */
      box-sizing: border-box;
      text-decoration: none;
      color: #000;
      background: transparent;
      user-select: none;

      /* let font define its own height */
      line-height: normal;

      border: 0;
      cursor: pointer;
      font: inherit;

      white-space: nowrap;
      max-width: 100%;
      min-width: 0;
    }

    /* Taskbar items all share ONE knob set */
    .taskbar-item {
      gap: 4px;
      flex: 0 1 auto; /* allow shrinking instead of overlapping */
      min-width: 0;
    }

    .taskbar-label {
      font-size: 12px;
      line-height: normal;   /* prevent glyph clipping */
      user-select: none;
      display: inline-block;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .menubar-search {
      width: 16px;
      height: 16px;
      image-rendering: pixelated;
      display: inline-block;
    }

    /* Menu item bevel hover (classic platinum, no blue highlight) */
    .menu-item:hover {
      border-top: 1px solid #ffffff;
      border-left: 1px solid #ffffff;
      border-right: 1px solid #6f6f6f;
      border-bottom: 1px solid #6f6f6f;
      background: linear-gradient(#efefef, #dcdcdc);
      color: #000;
    }

    .menu-item:active {
      border-top: 1px solid #6f6f6f;
      border-left: 1px solid #6f6f6f;
      border-right: 1px solid #ffffff;
      border-bottom: 1px solid #ffffff;
      background: linear-gradient(#dcdcdc, #efefef);
      color: #000;
    }

    .search-bar {
      display: none;
      position: fixed;
      top: 23px; /* drop just below the menu bar */
      right: 6px; /* upper-right corner */
      background: #efefef;
      border: 1px solid #7d7d7d;
      box-shadow: inset 0 1px 0 #ffffff;
      height: 22px;
      align-items: center;
      padding: 0 6px;
      z-index: 1001;
    }

    .search-bar input {
      width: 160px;
      background: transparent;
      border: none;
      outline: none;
      padding: 2px 0;
      height: 100%;
      box-sizing: border-box;
    }

    /* Right side cluster (time + find) pinned to the top-right */
    .right-group {
      margin-left: auto;
      display: flex;
      align-items: center;
      gap: 12px;
      padding-right: 0; /* rely on taskbar padding instead */
      overflow: hidden;
      flex: 1 1 auto;
      justify-content: flex-end;
      min-width: 0;
    }

    .menubar-clock {
      font-family: 'Chicago', sans-serif !important;
      font-weight: normal;
      font-size: 10px;
      line-height: normal;   /* avoid clipping pixel font */
      white-space: nowrap;
      user-select: none;
      min-width: 0;
      text-align: right;
      padding: 2px 6px;      /* match the vertical breathing room of buttons */
      box-sizing: border-box;
      flex: 0 0 auto;
      overflow: visible;
    }

    /* --- Popup / Window system (classic Mac) --- */
    .popup-overlay {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(255, 255, 255, 0.55);
      z-index: 3001;
    }

    .popup-window {
      width: min(520px, calc(100vw - 40px));
      max-width: calc(100vw - 40px);
      max-height: calc(100vh - 80px);
      background: #efefef;
      border: 1px solid #000000;
      box-shadow:
        1px 1px 0 #6e6e6e,
        2px 2px 0 #000000;
      display: flex;
      flex-direction: column;
      overflow: hidden; /* keep window inside viewport when screen shrinks */

      /* centered by default, then becomes draggable */
      position: fixed;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
    }

    /* Title bar mimics the taskbar aesthetic */
    .popup-titlebar {
      height: 22px;
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 0 6px;
      background: #dfdfdf;
      border-top: 1px solid #ffffff;
      border-bottom: 1px solid #000000;
      box-shadow:
        inset 0 1px 0 #ffffff,
        inset 0 -1px 0 #6e6e6e;
      user-select: none;
      cursor: move; /* drag handle */
      flex: 0 0 auto;
    }

    .popup-title {
      font-size: 12px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      flex: 1;
    }

    .popup-close {
      width: 14px;
      height: 14px;
      padding: 0;
      background: #dfdfdf;
      border-top: 1px solid #ffffff;
      border-left: 1px solid #ffffff;
      border-right: 1px solid #6f6f6f;
      border-bottom: 1px solid #6f6f6f;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      flex: 0 0 auto;
    }

    .popup-close:active {
      border-top: 1px solid #6f6f6f;
      border-left: 1px solid #6f6f6f;
      border-right: 1px solid #ffffff;
      border-bottom: 1px solid #ffffff;
      background: #dcdcdc;
    }

    .popup-close::before {
      content: "";
      width: 8px;
      height: 8px;
      background: #000;
      /* simple pixel X */
      clip-path: polygon(
        0 10%, 10% 0, 50% 40%, 90% 0, 100% 10%, 60% 50%, 100% 90%, 90% 100%, 50% 60%, 10% 100%, 0 90%, 40% 50%
      );
    }

    .popup-body {
      padding: 10px;
      overflow: auto;
      background: #ffffff;
      border-top: 1px solid #6e6e6e;
      box-shadow: inset 0 1px 0 #ffffff;
      flex: 1 1 auto; /* shrink + scroll on small screens */
      min-height: 0; /* important for flexbox overflow */
    }

    .popup-body img {
      max-width: 100%;
      height: auto;
      display: block;
    }

    /* Footer is caption-only (no buttons) */
    .popup-actions {
      display: flex;
      align-items: center;
      padding: 6px 8px;
      background: #efefef;
      border-top: 1px solid #6e6e6e;
      flex: 0 0 auto;
    }

    .popup-caption {
      font-size: 10px; /* size-4-ish */
      line-height: 1;
      user-select: none;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .popup-overlay.show {
      display: flex;
    }
  </style>
</head>
<body>
  <div class="desktop" id="desktop">
    <a href="pages/architecture.html" class="icon"><img src="images/folder-160.png" /><span>Architecture</span></a>
    <a href="pages/engineering.html" class="icon"><img src="images/folder-160.png" /><span>Engineering</span></a>
    <a href="pages/graphicdesign.html" class="icon"><img src="images/folder-160.png" /><span>Graphic Design</span></a>
    <a href="pages/aboutme.html" class="icon"><img src="images/folder-160.png" /><span>About Me</span></a>
    <a href="pages/8ball.html" class="icon"><img src="images/folder-160.png" /><span>???</span></a>
  </div>

  <div class="taskbar">
    <div class="left-group">
      <button class="menu-item taskbar-item" type="button" aria-label="About">
        <img src="images/apple folder.png" alt="Apple Folder" class="menubar-folder" />
        <span class="taskbar-label">About</span>
      </button>

      <a class="menu-item taskbar-item" href="mailto:jam@prtf.io"><span class="taskbar-label">E-mail</span></a>
    </div>

    <div class="right-group">
      <div class="menubar-clock" id="menubarClock"></div>
      <button class="menu-item taskbar-item" type="button" onclick="toggleSearch()" aria-label="Find">
        <img src="images/search icon-64.png" alt="Find" class="menubar-search" />
        <span class="taskbar-label">Find</span>
      </button>
    </div>
  </div>

  <div class="search-bar" id="searchBar">
    <input type="text" placeholder="Find..." onblur="hideSearch()" />
  </div>

  <!-- Global popup container (caption-only footer) -->
  <div class="popup-overlay" id="popupOverlay" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="popup-window" id="popupWindow">
      <div class="popup-titlebar" id="popupTitlebar">
        <button class="popup-close" type="button" aria-label="Close" onclick="closePopup()"></button>
        <div class="popup-title" id="popupTitle">Welcome</div>
      </div>
      <div class="popup-body" id="popupBody"></div>
      <div class="popup-actions">
        <div class="popup-caption" id="popupCaption"></div>
      </div>
    </div>
  </div>

  <script>
    // --- Global Popup API ---
    var popupOverlay = document.getElementById('popupOverlay');
    var popupWindow = document.getElementById('popupWindow');
    var popupTitlebar = document.getElementById('popupTitlebar');
    var popupTitleEl = document.getElementById('popupTitle');
    var popupBodyEl = document.getElementById('popupBody');
    var popupCaptionEl = document.getElementById('popupCaption');

    function resetPopupPosition() {
      if (!popupWindow) return;
      popupWindow.style.left = '50%';
      popupWindow.style.top = '50%';
      popupWindow.style.transform = 'translate(-50%, -50%)';
    }

    function clampPopupToViewport() {
      if (!popupWindow) return;
      // Only clamp if user has dragged (transform removed)
      if (popupWindow.style.transform && popupWindow.style.transform !== 'none') return;

      var r = popupWindow.getBoundingClientRect();
      var margin = 10;

      var x = r.left;
      var y = r.top;

      var maxX = window.innerWidth - r.width - margin;
      var maxY = window.innerHeight - r.height - margin;

      x = Math.max(margin, Math.min(maxX, x));
      y = Math.max(margin, Math.min(maxY, y));

      popupWindow.style.left = x + 'px';
      popupWindow.style.top = y + 'px';
    }

    // Drag popup by the title bar (classic Mac behavior)
    var popupDragging = false;
    var popupOffX = 0;
    var popupOffY = 0;

    if (popupTitlebar && popupWindow) {
      popupTitlebar.addEventListener('mousedown', function (e) {
        // don't start drag when clicking the close button
        if (e.target && e.target.closest && e.target.closest('.popup-close')) return;

        e.preventDefault();
        var r = popupWindow.getBoundingClientRect();

        // convert from transform-centered to absolute pixels so we can drag
        popupWindow.style.left = r.left + 'px';
        popupWindow.style.top = r.top + 'px';
        popupWindow.style.transform = 'none';

        popupDragging = true;
        popupOffX = e.clientX - r.left;
        popupOffY = e.clientY - r.top;
      });

      document.addEventListener('mousemove', function (e) {
        if (!popupDragging || !popupWindow) return;

        var r = popupWindow.getBoundingClientRect();
        var x = e.clientX - popupOffX;
        var y = e.clientY - popupOffY;

        // clamp inside viewport with a small margin
        var margin = 10;
        var maxX = window.innerWidth - r.width - margin;
        var maxY = window.innerHeight - r.height - margin;
        x = Math.max(margin, Math.min(maxX, x));
        y = Math.max(margin, Math.min(maxY, y));

        popupWindow.style.left = x + 'px';
        popupWindow.style.top = y + 'px';
      });

      document.addEventListener('mouseup', function () {
        popupDragging = false;
        clampPopupToViewport();
      });

      window.addEventListener('resize', function () {
        clampPopupToViewport();
      });
    }

    function openPopup(opts) {
      // center it each time by default (set opts.preservePosition = true to keep last position)
      if (!opts || !opts.preservePosition) resetPopupPosition();
      opts = opts || {};
      if (!popupOverlay) return;

      popupTitleEl.textContent = opts.title || 'Notice';
      popupBodyEl.innerHTML = opts.html || '';
      if (popupCaptionEl) popupCaptionEl.textContent = opts.caption || '';

      popupOverlay.classList.add('show');
      popupOverlay.setAttribute('aria-hidden', 'false');
    }

    function closePopup() {
      if (!popupOverlay) return;
      popupOverlay.classList.remove('show');
      popupOverlay.setAttribute('aria-hidden', 'true');

      // reset position when closing so it doesn't reopen off-screen
      resetPopupPosition();
    }

    // close when clicking outside window
    if (popupOverlay) {
      popupOverlay.addEventListener('mousedown', function (e) {
        if (e.target === popupOverlay) closePopup();
      });
    }

    // Welcome popup on every page load
    window.addEventListener('DOMContentLoaded', function () {
      openPopup({
        title: 'Welcome',
        caption: '',
        html:
          '<div style="display:flex; justify-content:center; align-items:center; padding:8px;">' +
          '<img src="images/LV.png" alt="LV" style="max-width:100%; height:auto; image-rendering:pixelated;" />' +
          '</div>'
      });
    });

    // --- Clock (fresh) ---
    (function initMenubarClock() {
      var el = document.getElementById('menubarClock');
      if (!el) return;

      function tick() {
        var now = new Date();
        var h = now.getHours();
        var m = now.getMinutes();
        var ampm = h >= 12 ? 'PM' : 'AM';
        h = h % 12;
        if (h === 0) h = 12;
        var mm = (m < 10 ? '0' + m : '' + m);
        var colon = (now.getSeconds() % 2 === 0) ? ':' : ' ';
        el.textContent = '' + h + colon + mm + ' ' + ampm;
      }

      tick();
      setInterval(tick, 1000);
    })();

    // --- Find dropdown ---
    function toggleSearch() {
      var sb = document.getElementById('searchBar');
      if (!sb) return;
      sb.style.display = (sb.style.display === 'flex') ? 'none' : 'flex';
      if (sb.style.display === 'flex') {
        var input = sb.querySelector('input');
        if (input) input.focus();
      }
    }

    function hideSearch() {
      var sb = document.getElementById('searchBar');
      if (sb) sb.style.display = 'none';
    }

    // --- Desktop icons (layout + drag) ---
    var icons = Array.from(document.querySelectorAll('.icon'));

    var dragging = false;
    var possible = false;
    var startX = 0,
      startY = 0;
    var offX = 0,
      offY = 0;
    var el = null;
    var threshold = 5;

    function layoutIcons() {
      // Use known sizes so we don't depend on image load timing
      var paddingLeft = 10;
      var paddingTop = 10;
      var gapX = 12; // tighter horizontal spacing
      var gapY = 30;
      var iconW = 99; // matches .icon width
      var iconH = 120; // enough for folder + label

      var x = paddingLeft;
      var y = paddingTop;

      icons.forEach(function (icon) {
        if (x + iconW > window.innerWidth - 10) {
          x = paddingLeft;
          y += iconH + gapY;
        }
        icon.style.left = x + 'px';
        icon.style.top = y + 'px';
        x += iconW + gapX;
      });
    }

    // Make sure they never start stacked
    layoutIcons();
    window.addEventListener('load', function () {
      layoutIcons();
      requestAnimationFrame(layoutIcons);
    });
    window.addEventListener('resize', function () {
      if (!dragging) layoutIcons();
    });

    icons.forEach(function (icon) {
      icon.addEventListener('mousedown', function (e) {
        e.preventDefault();
        startX = e.clientX;
        startY = e.clientY;
        el = icon;
        offX = e.clientX - el.offsetLeft;
        offY = e.clientY - el.offsetTop;
        possible = true;
        icons.forEach(function (i) {
          i.classList.remove('selected');
        });
        el.classList.add('selected');
      });

      icon.addEventListener('dblclick', function () {
        location.href = icon.href;
      });

      icon.addEventListener('click', function (e) {
        e.preventDefault();
        icons.forEach(function (i) {
          i.classList.remove('selected');
        });
        icon.classList.add('selected');
      });
    });

    document.addEventListener('mousemove', function (e) {
      if (!possible) return;

      if (!dragging) {
        var dx = e.clientX - startX;
        var dy = e.clientY - startY;
        if (Math.abs(dx) > threshold || Math.abs(dy) > threshold) {
          dragging = true;
          if (el) el.style.zIndex = 1000;
        }
      }

      if (dragging && el) {
        var x = e.clientX - offX;
        var y = e.clientY - offY;
        x = Math.max(0, Math.min(window.innerWidth - el.offsetWidth, x));
        y = Math.max(0, Math.min(window.innerHeight - el.offsetHeight, y));
        el.style.left = x + 'px';
        el.style.top = y + 'px';
      }
    });

    document.addEventListener('mouseup', function () {
      possible = false;
      dragging = false;
      if (el) el.style.zIndex = '';
    });

    document.addEventListener('click', function (e) {
      if (!e.target.closest('.icon')) {
        icons.forEach(function (i) {
          i.classList.remove('selected');
        });
      }
    });
  </script>
</body>
</html>
